!function(){function t(i,e,n){function o(s,r){if(!e[s]){if(!i[s]){var d="function"==typeof require&&require;if(!r&&d)return d(s,!0);if(a)return a(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var c=e[s]={exports:{}};i[s][0].call(c.exports,function(t){var e=i[s][1][t];return o(e||t)},c,c.exports,t,i,e,n)}return e[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}return t}()({1:[function(t,i,e){"use strict";function n(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(i,e,n){return e&&t(i.prototype,e),n&&t(i,n),i}}(),a=e.QRCode_Scanner=function(){function t(){n(this,t),this._initConst(),this._autoStartIconContainer=null,this._autoStopIconContainer=null,this._startStopIconContainer=null,this._addInfoPaneContainer=null,this._switchIconContainer=null,this._initAutoStart=null,this._isCameraStarted=!1,this._isAutoStart=!0,this._isAutoStop=!0,this._isCameraPending=!1,this._isFrontSwitch=!1,this._selectedCamera=0,this._isIOS=!1,this._init()}return o(t,[{key:"_initConst",value:function(){this._InfoPaneMinWidth=350,this._InfoPaneFadeoutTimeout=1e4,this._StartKey="StartQR",this._EndKey="EndQR",this._AutoStartKey="AutoStart",this._AutoStopKey="AutoStop",this._SwitchKey="SwithCamera",this._AddInfoPaneId="addInfoPane",this._StartDesc="Start camera",this._EndDesc="Stop camera",this._AutoStartDesc="Auto start camera on load",this._AutoStopDesc="Auto stop camera after scan",this._SwitchDesc="Switch camera",this._CameraList=[],this._StartIconHtml=window.commandBarHelper.getAlignmentDivHTML("MiddleCenter",'<svg style="width:24px;height:24px;" viewBox="0 0 24 24"><path d="M20,4H16.83L15,2H9L7.17,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6A2,2 0 0,0 20,4M20,18H4V6H8.05L9.88,4H14.12L15.95,6H20V18M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15Z" /></svg>'),this._EndIconHtml=window.commandBarHelper.getAlignmentDivHTML("MiddleCenter",'<svg style="width:24px;height:24px;" viewBox="0 0 24 24"><path d="M 20 4 L 16.83 4 L 15 2 L 9 2 L 7.17 4 L 4 4 C 2.895 4 2 4.895 2 6 L 2 18 C 2 19.105 2.895 20 4 20 L 20 20 C 21.105 20 22 19.105 22 18 L 22 6 C 22 4.895 21.105 4 20 4 M 20 18 L 4 18 L 4 6 L 8.05 6 L 9.88 4 L 14.12 4 L 15.95 6 L 20 6 L 20 18" ></path><rect x="8" y="8" width="8" height="8"></rect></svg>'),this._AutoStartEnabledIconHtml=window.commandBarHelper.getAlignmentDivHTML("MiddleCenter",'<svg style="width:24px;height:24px;" viewBox="0 0 24 24"><path d="M 20 4 L 16.83 4 L 15 2 L 9 2 L 7.17 4 L 4 4 C 2.895 4 2 4.895 2 6 L 2 18 C 2 19.105 2.895 20 4 20 L 20 20 C 21.105 20 22 19.105 22 18 L 22 6 C 22 4.895 21.105 4 20 4 M 20 18 L 4 18 L 4 6 L 8.05 6 L 9.88 4 L 14.12 4 L 15.95 6 L 20 6 L 20 18" ></path><path d="M 12.033 8.007 C 13.084 8.007 14.086 8.408 14.837 9.159 C 16.388 10.711 16.388 13.264 14.837 14.816 C 13.935 15.767 12.684 16.117 11.482 15.967 L 11.733 14.966 C 12.584 15.066 13.485 14.766 14.136 14.115 C 15.287 12.963 15.287 11.061 14.136 9.86 C 13.585 9.309 12.784 9.009 12.033 9.009 L 12.033 11.311 L 9.53 8.808 L 12.033 6.305 L 12.033 8.007 M 9.18 14.816 C 7.878 13.514 7.678 11.512 8.579 9.96 L 9.33 10.711 C 8.779 11.812 8.979 13.214 9.931 14.115 C 10.181 14.365 10.481 14.565 10.832 14.716 L 10.531 15.717 C 10.031 15.517 9.58 15.216 9.18 14.816 Z" ></path></svg>'),this._AutoStartDisabledIconHtml=window.commandBarHelper.getAlignmentDivHTML("MiddleCenter",'<svg style="width:24px;height:24px;" viewBox="0 0 24 24"><path d="M 20 4 L 16.83 4 L 15 2 L 9 2 L 7.17 4 L 4 4 C 2.895 4 2 4.895 2 6 L 2 18 C 2 19.105 2.895 20 4 20 L 20 20 C 21.105 20 22 19.105 22 18 L 22 6 C 22 4.895 21.105 4 20 4 M 20 18 L 4 18 L 4 6 L 8.05 6 L 9.88 4 L 14.12 4 L 15.95 6 L 20 6 L 20 18"></path><path d="M 16.428 17.316 L 14.327 15.213 C 13.475 15.815 12.475 16.064 11.474 15.914 L 11.724 14.914 C 12.375 14.964 13.025 14.814 13.576 14.463 L 6.569 7.456 L 7.219 6.805 L 14.276 13.862 L 14.977 14.563 L 17.079 16.666 L 16.428 17.316 M 12.024 8.957 C 12.774 8.957 13.576 9.258 14.126 9.859 C 15.027 10.759 15.228 12.061 14.776 13.162 L 15.527 13.912 C 16.378 12.41 16.128 10.459 14.827 9.158 C 14.077 8.358 13.025 7.956 12.024 7.956 L 12.024 6.305 L 9.972 8.307 L 12.024 10.36 L 12.024 8.957 M 9.321 10.659 L 8.571 9.908 C 7.67 11.46 7.871 13.462 9.171 14.814 C 9.572 15.164 10.022 15.464 10.523 15.665 L 10.772 14.663 C 10.473 14.512 10.172 14.313 9.872 14.063 C 8.97 13.162 8.772 11.76 9.321 10.659 Z" ></path></svg>'),this._AutoStopEnabledIconHtml=window.commandBarHelper.getAlignmentDivHTML("MiddleCenter",'<svg style="width:24px;height:24px;" viewBox="0 0 24 24"><path d="M3.05,13H1V11H3.05C3.5,6.83 6.83,3.5 11,3.05V1H13V3.05C17.17,3.5 20.5,6.83 20.95,11H23V13H20.95C20.5,17.17 17.17,20.5 13,20.95V23H11V20.95C6.83,20.5 3.5,17.17 3.05,13M12,5A7,7 0 0,0 5,12A7,7 0 0,0 12,19A7,7 0 0,0 19,12A7,7 0 0,0 12,5Z" /></svg>'),this._AutoStopDisabledIconHtml=window.commandBarHelper.getAlignmentDivHTML("MiddleCenter",'<svg style="width:24px;height:24px;" viewBox="0 0 24 24"><path d="M20.94 11C20.5 6.83 17.17 3.5 13 3.06V1H11V3.06C9.87 3.18 8.81 3.5 7.84 4.03L9.34 5.53C10.16 5.19 11.06 5 12 5C15.87 5 19 8.13 19 12C19 12.94 18.81 13.84 18.5 14.65L20 16.15C20.5 15.19 20.82 14.13 20.95 13H23V11H20.94M3 4.27L5.04 6.31C3.97 7.62 3.25 9.23 3.06 11H1V13H3.06C3.5 17.17 6.83 20.5 11 20.94V23H13V20.94C14.77 20.74 16.38 20.03 17.69 18.96L19.73 21L21 19.73L4.27 3L3 4.27M16.27 17.54C15.09 18.45 13.61 19 12 19C8.13 19 5 15.87 5 12C5 10.39 5.55 8.91 6.46 7.73L16.27 17.54Z" /></svg>'),this._FrontSwitchIconHtml=window.commandBarHelper.getAlignmentDivHTML("MiddleCenter",'<svg style="width:24px;height:24px" viewBox="0 0 24 24"><path d="M6,0H18A2,2 0 0,1 20,2V22A2,2 0 0,1 18,24H6A2,2 0 0,1 4,22V2A2,2 0 0,1 6,0M12,6A3,3 0 0,1 15,9A3,3 0 0,1 12,12A3,3 0 0,1 9,9A3,3 0 0,1 12,6M11,1V3H13V1H11M6,4V16.5C6,15.12 8.69,14 12,14C15.31,14 18,15.12 18,16.5V4H6M13,18H9V20H13V22L16,19L13,16V18Z" /></svg>'),this._BackSwitchIconHtml=window.commandBarHelper.getAlignmentDivHTML("MiddleCenter",'<svg style="width:24px;height:24px" viewBox="0 0 24 24"><path d="M6,0H18A2,2 0 0,1 20,2V22A2,2 0 0,1 18,24H6A2,2 0 0,1 4,22V2A2,2 0 0,1 6,0M12,2A2,2 0 0,0 10,4A2,2 0 0,0 12,6A2,2 0 0,0 14,4A2,2 0 0,0 12,2M13,18H9V20H13V22L16,19L13,16V18Z" /></svg>'),this._AddInfoPaneHtml='<div id="'+this._AddInfoPaneId+'"></div>',this._AddInfoInfoStyle="",this._AddInfoWarningStyle=' style="color: red;"'}},{key:"_init",value:function(){this._proxy=window.SmaCustomWidget.proxy,this._proxy.addOnLoad(this._onLoad.bind(this)),this._proxy.autoResize=!1,this._host=this._proxy.host;var t=document.getElementById("preview");window.scanner=new Instascan.Scanner({video:t}),t.style.width=window.innerWidth+"px",t.style.height=window.innerHeight+"px",this._isIOS=(/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!window.MSStream}},{key:"_onLoad",value:function(){this._initWidget()}},{key:"_initWidget",value:function(){var t=this,i=function e(){return null!==cwidget&&t._proxy.ready?void t._doInitActions():void window.setTimeout(e,200)};i()}},{key:"_doInitActions",value:function(){this._setupCommandBar(),this._registerPropertyHandler(),this._onScanComplete(),window.onresize=this._resizeVideo.bind(this)}},{key:"_registerPropertyHandler",value:function(){cwidget.on("AutoStart",this._autoStart.bind(this)),cwidget.on("AutoStop",this._autoStop.bind(this)),cwidget.on("StartStop",this._start.bind(this)),cwidget.on("BackgroundColor",this._backgroundColor.bind(this))}},{key:"_resizeVideo",value:function(){var t=document.getElementById("preview");t.style.width=window.innerWidth+"px",t.style.height=window.innerHeight+"px"}},{key:"_setAutoStart",value:function(){this._checkTrue(cwidget.AutoStart)?(this._isAutoStart=!1,cwidget.AutoStart=!1):(this._isAutoStart=!0,cwidget.AutoStart=!0)}},{key:"_setAutoStop",value:function(){this._checkTrue(cwidget.AutoStop)?(this._isAutoStop=!1,cwidget.AutoStop=!1):(this._isAutoStop=!0,cwidget.AutoStop=!0)}},{key:"_autoStart",value:function(){this._isAutoStart=cwidget.AutoStart,this._autoStartIconContainer&&this._updateAutoStartIcon(this._autoStartIconContainer,this._checkTrue(cwidget.AutoStart)),this._checkTrue(cwidget.AutoStart)&&0==this._isCameraStarted&&!this._isCameraPending&&(this._initAutoStart=!0,this._getMedia(this._selectedCamera))}},{key:"_autoStop",value:function(){this._isAutoStop=cwidget.AutoStop,this._autoStopIconContainer&&this._updateAutoStopIcon(this._autoStopIconContainer,this._checkTrue(cwidget.AutoStop))}},{key:"_start",value:function(){0==this._isCameraStarted&&this._checkTrue(cwidget.StartStop)&&!this._isCameraPending?this._getMedia(this._selectedCamera):this._initAutoStart||1!=this._isCameraStarted||this._checkTrue(cwidget.StartStop)||this._isCameraPending||this._stopMedia(),this._updateCommandsIcon()}},{key:"_backgroundColor",value:function(){var t=cwidget.BackgroundColor;""==t&&(t="Black"),document.getElementById("cameraArea").style.background=t}},{key:"_checkTrue",value:function(t){return"1"==t||null!=t&&t.toLowerCase&&"true"==t.toLowerCase()||t===!0}},{key:"_onScanComplete",value:function(){if(window.scanner){var t=this;this._addInfoPaneContainer&&(this._addInfoPaneContainer.innerHTML="&nbsp;"),window.scanner.addListener("scan",function(i){console.log("content:"+i),cwidget.QRCode=i,this._showAdditionalInfo("Code: "+i),t._checkTrue(cwidget.AutoStop)&&window.scanner.stop().then(function(){document.getElementById("preview").style.visibility="hidden",t._isCameraStarted=!1,cwidget.StartStop=!1,this._updateCommandsIcon()}.bind(this))}.bind(this))}}},{key:"_getMedia",value:function(t){this._isCameraPending=!0,window.scanner&&(document.getElementById("preview").style.visibility="inherit",Instascan.Camera.getCameras().then(function(i){i.length>0?(cwidget.StartStop=!0,this._initAutoStart&&(this._initAutoStart=!1),this._isIOS&&(0==this._selectedCamera?i[this._selectedCamera].facingMode="user":1==this._selectedCamera&&(i[this._selectedCamera].facingMode="environment")),window.scanner.start(i[t]).then(function(){setTimeout(function(){2==document.getElementById("preview").videoWidth&&this._onError("Error: Camera not available.")}.bind(this),500),this._isCameraPending=!1}.bind(this))["catch"](function(t){this._onError(t)}.bind(this))):this._onError("Error: No cameras found."),this._CameraList.length<1&&(this._CameraList=i,1==this._CameraList.length&&(this._switchIconContainer.style.pointerEvents="none",this._switchIconContainer.getElementsByTagName("svg")[0].style.fill="rgba(255,255,255,0.1)"))}.bind(this))["catch"](function(t){console.warn(t),t.message.indexOf("NotFoundError")>-1?this._onError("Error: No cameras found."):t.message.indexOf("NotReadableError")>-1?this._onError("Error: Camera not available."):this._onError("Error: Access camera failed.")}.bind(this))),this._isCameraStarted=!0}},{key:"_stopMedia",value:function(){this._isCameraPending=!0,window.scanner&&window.scanner.stop().then(function(){cwidget.StartStop=!1,this._isCameraPending=!1}.bind(this))["catch"](function(t){cwidget.StartStop=!1,this._isCameraPending=!1}.bind(this)),document.getElementById("preview").style.visibility="hidden",this._isCameraStarted=!1}},{key:"_updateSelected",value:function(){window.scanner&&(document.getElementById("preview").style.visibility="inherit",this._CameraList.length>1&&(this._selectedCamera=this._isFrontSwitch?0:1,this._switchIconContainer.style.pointerEvents="none",this._switchIconContainer.getElementsByTagName("svg")[0].style.fill="rgba(255,255,255,0.1)",this._isCameraPending=!0,this._isIOS&&(0==this._selectedCamera?this._CameraList[this._selectedCamera].facingMode="user":1==this._selectedCamera&&(this._CameraList[this._selectedCamera].facingMode="environment")),window.scanner.start(this._CameraList[this._selectedCamera]).then(function(){this._isCameraPending=!1,setTimeout(function(){2==document.getElementById("preview").videoWidth?this._onError("Error: Camera not available."):(this._switchIconContainer.style.pointerEvents="auto",this._switchIconContainer.getElementsByTagName("svg")[0].style.fill="",this._isFrontSwitch=!this._isFrontSwitch)}.bind(this),500)}.bind(this))["catch"](function(t){this._onError(t)}.bind(this))))}},{key:"_onError",value:function(t){document.getElementById("preview").style.visibility="hidden",this._isCameraPending=!1,this._isCameraStarted=!1,cwidget.StartStop=!1,this._updateCommandsIcon(),this._showAdditionalInfo(t)}},{key:"_showAdditionalInfo",value:function(t,i){var e="";if(t&&""!=t)if(Array.isArray(t))for(var n=0;n<t.length;n++)e+="<p"+this._AddInfoInfoStyle+">"+t[n].toString()+"</p>";else e+="<p"+this._AddInfoInfoStyle+">"+t.toString()+"</p>";if(i&&""!=i)if(Array.isArray(i))for(var n=0;n<i.length;n++)e+="<p"+this._AddInfoWarningStyle+">"+i[n].toString()+"</p>";else e+="<p"+this._AddInfoWarningStyle+">"+i.toString()+"</p>";return this._addInfoPaneContainer?(this._addInfoPaneContainer.innerHTML=e,window.commandBarHelper.showInfoPane(this._InfoPaneFadeoutTimeout),void(this._addInfoPaneContainer.clientWidth+window.commandBarHelper._commandTotalWidth>window.commandBarHelper._mainContainer.clientWidth&&(window.commandBarHelper._additionalInfoPane.style.width=window.commandBarHelper._mainContainer.clientWidth+"px"))):void(this._initInfoHtml=e)}},{key:"_updateCommandsIcon",value:function(){this._startStopIconContainer&&(this._updateStartStopIcon(this._startStopIconContainer,this._isCameraStarted),setTimeout(function(){var t=this._startStopIconContainer.querySelector("."+window.commandBarHelper._TooltipClassName);t&&(t.innerText=this._isCameraStarted?this._EndDesc:this._StartDesc)}.bind(this),10))}},{key:"_updateAutoStartIcon",value:function(t,i){window.commandBarHelper.updateContainer(t,function(t){t.innerHTML=i?this._AutoStartEnabledIconHtml:this._AutoStartDisabledIconHtml}.bind(this))}},{key:"_updateAutoStopIcon",value:function(t,i){window.commandBarHelper.updateContainer(t,function(t){t.innerHTML=i?this._AutoStopEnabledIconHtml:this._AutoStopDisabledIconHtml}.bind(this))}},{key:"_updateStartStopIcon",value:function(t,i){window.commandBarHelper.updateContainer(t,function(t){t.innerHTML=i?this._EndIconHtml:this._StartIconHtml}.bind(this),i?this._EndDesc:this._StartDesc)}},{key:"_updateSwitchIcon",value:function(t,i,e){var n=this._BackSwitchIconHtml,o="Camera2";e||(n=i?this._BackSwitchIconHtml:this._FrontSwitchIconHtml,o=i?"Camera2":"Camera1"),window.commandBarHelper.updateContainer(t,function(t){t.innerHTML=n}.bind(this)),setTimeout(function(){var t=this._switchIconContainer.querySelector("."+window.commandBarHelper._TooltipClassName);t&&(t.innerText=o)}.bind(this),10)}},{key:"_setupCommandBar",value:function(){var t={additionalInfoPane:{mode:"AutoHide",minWidth:this._InfoPaneMinWidth+"px",contentAlign:"MiddleLeft",innerHTML:this._AddInfoPaneHtml,visibility:"hidden",onPaneCreated:function(t){this._addInfoPaneContainer=this._addInfoPaneContainer||t.querySelector("#"+this._AddInfoPaneId),null!=this._initInfoHtml&&""!=this._initInfoHtml&&(this._addInfoPaneContainer.innerHTML=this._initInfoHtml,window.commandBarHelper.showInfoPane(this._InfoPaneFadeoutTimeout),this._initInfoHtml=null)}.bind(this),onSizeChanged:function(t,i,e,n){if(!n){var o=window.commandBarHelper;t.parentNode.style.width="auto",o._mainContainer.clientWidth-o._commandTotalWidth>0&&(t.parentNode.style.minWidth=o._mainContainer.clientWidth-o._commandTotalWidth+"px"),o._removeAndAddClass(o._additionalInfoPane,o._AdditionalInfoPaneInlineClass,o._AdditionalInfoPaneMultiLineClass)}}.bind(this)},commands:[{type:"Command",key:this._StartKey,description:this._StartDesc,innerHTML:this._StartIconHtml,onPaneCreated:function(t,i){this._startStopIconContainer=i,this._updateCommandsIcon()}.bind(this),onClick:function(t,i,e){this._isCameraStarted||this._isCameraPending?this._isCameraPending||this._stopMedia():this._getMedia(this._selectedCamera),this._updateCommandsIcon()}.bind(this)},{type:"Divider"},{type:"Command",key:this._SwitchKey,description:this._SwitchDesc,enabled:!0,onPaneCreated:function(t,i){this._switchIconContainer=i,this._updateSwitchIcon(i,this._isFrontSwitch,!0)}.bind(this),onClick:function(t,i,e){this._isCameraStarted&&(this._updateSwitchIcon(i,this._isFrontSwitch,!1),this._updateSelected())}.bind(this)},{type:"Command",key:this._AutoStartKey,description:this._AutoStartDesc,enabled:!0,onPaneCreated:function(t,i){this._autoStartIconContainer=i,this._updateAutoStartIcon(i,this._isAutoStart)}.bind(this),onClick:function(t,i,e){cwidget.AutoStart=!this._checkTrue(cwidget.AutoStart),!cwidget.AutoStart||this._isCameraStarted||this._isCameraPending||this._getMedia(this._selectedCamera),this._updateAutoStartIcon(i,cwidget.AutoStart),this._updateCommandsIcon()}.bind(this)},{type:"Command",key:this._AutoStopKey,description:this._AutoStopDesc,enabled:!0,onPaneCreated:function(t,i){this._autoStopIconContainer=i,this._updateAutoStopIcon(i,this._isAutoStop)}.bind(this),onClick:function(t,i,e){cwidget.AutoStop=!this._checkTrue(cwidget.AutoStop),this._updateAutoStopIcon(i,cwidget.AutoStop)}.bind(this)}]};window.commandBarHelper.setCommand(t)}}]),t}();new a},{}]},{},[1]);
//# sourceMappingURL=E:/MACODE/InTouch/Widget-Dev/CustomWidgetCreator/QRCode_Scanner/QRCode_Scanner/build/build.min.js.map